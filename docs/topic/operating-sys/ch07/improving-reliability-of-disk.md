# 提高磁盘可靠性技术

容错技术是通过在系统中设置冗余部件的方法来提高系统可靠性的一种技术。

## 第一级磁盘容错技术 SFT-I

主要用于防止因磁盘表面缺陷所造成的数据丢失，主要措施有

- 双份目录和双份文件分配表（FAT）
- 热修复重定向：系统将磁盘容量很小的一部分（2%~3%）作为热修复定向区，用于存放当磁盘有缺陷时的待写数据，并对写入该去的所有数据进行登记
- 写后读校验：在每次向磁盘写入一个数据后，立即将它读出，并送至另一缓冲区中，再将其与写后仍保留在缓冲区的数据进行比较。若数据有缺陷，则将数据写入热修复重定向区。

## 第二级磁盘容错技术 SFT-II

主要用于防止由磁盘驱动器和磁盘控制器故障所导致的系统不正常工作，具体措施有

- 磁盘镜像（Disk Mirroring）： 在同一磁盘控制器下，增设一个完全相同的磁盘驱动器，在每次主磁盘写入数据后，都需要将数据备份到备份磁盘上。当主磁盘驱动器发生故障，立即进行切换。
- 磁盘双工（Disk Duplexing）：将两台磁盘驱动器分别接到两个磁盘控制器上，防止磁盘控制器或主机到磁盘控制器间的通道发生故障。

## 基于集群技术的容错功能

集群是指把一组互连的自主计算机组成统一的计算机系统。

- 双机热备份模式：有两台处理能力完成相同的服务器，各装上一块网卡，并通过一条镜像服务器链路 MSL 将两台服务器连接起来。
- 双机互为备份模式：两台服务器都配置两台硬盘，平时均为在线服务器，各自完成各自的任务。两台服务器用专线连接起来，并用路由器将两台服务器互连起来，作为通信备份线路。
- 共用磁盘模式：将多台计算机连接到一台公共的磁盘系统上，该公共磁盘被划分为若干个卷，每台计算机使用一个卷。当一台计算机发生故障时，磁盘系统将重新配置，调度另一台计算机承担故障计算机的任务。

## 后备系统

在一个完整的系统中是必须配置后备系统的，可将暂时不需要使用的数据和比较重要的数据放在备份系统中。目前的备份系统有磁带机、硬盘、光盘驱动器

## ChangeLog

> 2018.09.24 初稿