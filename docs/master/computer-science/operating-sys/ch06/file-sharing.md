# 文件共享

## 基于有向无循环图实现文件共享

在树形结构的基础上，允许文件有多个父目录，便形成了有向无循环图。

### 利用索引节点建立共享文件与父节点的链接

树形目录结构各文件目录的文件目录项仅含有文件名和指向索引节点的指针，索引节点中设置 count 变量，用于记录该文件被多少用户共享。索引节点所记录文件的文件主为创建该文件的用户，直至文件被所有用户删除。

## 利用符号链接实现文件共享

利用符号链接实现文件共享，允许允许文件（或目录）有多个父目录，但其中仅有一个作为主父目录，其他几个父目录都是通过符号链接方式与之相链接。

### 利用 link 类型文件实现符号链接

当一已存在文件需要被另一目录共享时，OS 创建一个 link 类型文件（仅包含被链接文件的路径名，即符号链接），将其写入父目录。当用户通过该父目录访问文件时，且正要读 link 类型文件时，此时要求被 OS 截获，OS 根据路径名去找到文件，然后访问该文件。

## ChangeLog

> 2018.09.21 初稿